<!doctype html>
<html lang="{{ $.Site.Language.Lang }}">
  {{ partial "head" . }}
  <body class="sans-serif">

    {{ block "header" . }}{{ partial "nav" . }}{{end}}

    {{ block "main" . }}{{ end }}

    {{ block "footer" . }}{{ partial "footer" . }}{{end}}

    {{ $script := .Site.Data.webpack.main }}
    {{ with $script.js }}
      <script src="{{ relURL . }}"></script>
    {{ end }}
    <!-- DocSearch JS -->
    <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
    <script>
      docsearch({
        appId: 'TPVVV4HW9C',
        apiKey: '38df777d1e1eca13019e565f693d7b2a',
        indexName: 'italianschoolsd_index',
        container: '#search',
        transformItems(items) {
          return items.map(item => ({
            ...item,
            lvl0: item.lvl0 || "Untitled"
          }));
        },
        hitComponent({ hit }) {
          const title = hit.hierarchy?.lvl0 || hit.title || "Untitled";
          const url = hit.url || "#";
          const el = document.createElement('a');
          el.href = url;
          el.textContent = title;
          el.className = "DocSearch-Hit-link";
          return el;
        }
      });
    </script>
  </body>
</html>
